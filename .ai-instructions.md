# AI Agent Instructions

Project standards for AI assistants working on this codebase.

## Core Principles

- **Minimal code**: Keep code short and readable
- **No excessive documentation**: Brief comments only when logic isn't obvious
- **Clean separation**: Each screen in its own file (`.py` + `.kv`)
- **No code repetition**: Use reusable components from `app/components.kv`

## Project Structure

```text
app/               # Core app components
  __init__.py      # AppScreenManager, BaseScreen
  app.kv           # Main KV file, imports theme/components/screens
  theme.kv         # Color palette documentation
  components.kv    # Reusable UI components (NavButton, BackButton, etc.)

screens/           # One module per screen
  __init__.py      # Exports all screen classes
  <name>.py        # Screen logic
  <name>.kv        # Screen layout

main.py            # Entry point (Android vs Desktop hot-reload)
```

## Theme Colors (from app/theme.kv)

```text
Background:     0.06, 0.065, 0.09    (Deep Navy)
Surface:        0.10, 0.11, 0.14     (Card background)
Surface Light:  0.14, 0.15, 0.19     (Inputs, elevated)
Primary:        0.35, 0.55, 1.0      (Blue accent)
Accent:         0.55, 0.85, 0.65     (Mint green)
Danger:         0.85, 0.35, 0.40     (Red)
Text Primary:   0.95, 0.96, 0.98     (Headings)
Text Secondary: 0.75, 0.77, 0.82     (Body)
Text Muted:     0.5, 0.53, 0.6       (Labels)
```

## Reusable Components (from app/components.kv)

- `NavButton` - Navigation button with icon and left accent bar
- `BackButton` - Back navigation button for secondary screens
- `ScreenTitle` - Large screen title label
- `SectionLabel` - Small uppercase section header
- `ModernButton` - Styled button with `btn_color` property
- `Card` - Container with surface background and rounded corners

## Naming Conventions

- Screen classes: `<Name>Screen` (e.g., `HomeScreen`, `SettingsScreen`)
- Screen names in KV: lowercase (e.g., `name: 'home'`, `name: 'settings'`)
- Navigation: `root.go_to('screen_name')` or `root.go_to('screen_name', 'right')`

## Adding a New Screen

1. Create `screens/<name>.py` with class extending `BaseScreen`
2. Create `screens/<name>.kv` with layout
3. Add to `screens/__init__.py` exports
4. Add `#:include screens/<name>.kv` in `app/app.kv`
5. Add `<NameScreen>:` to `AppScreenManager` in `app/app.kv`
6. Register in `main.py` CLASSES dict for hot-reload

## Screen Template

```kv
<YourScreen>:
    name: 'yourscreen'

    canvas.before:
        Color:
            rgba: 0.06, 0.065, 0.09, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: '24dp', '60dp', '24dp', '24dp'
        spacing: '16dp'

        ScreenTitle:
            text: "Your Screen"
        
        # Content here...

    BackButton:
        on_release: root.go_to('home', 'right')
```

## Code Style

- Use `*args` in lifecycle overrides: `def on_enter(self, *args):`
- Call super: `super().on_enter(*args)`
- Private methods: prefix with underscore `_start_idle()`
- No logger calls unless debugging specific issues
- Use f-strings for formatting

## Important Notes

- BackButton should be placed AFTER content widgets to render on top
- For ScrollView screens, place BackButton after ScrollView closes
- Use `size_hint_y: None` with explicit `height` for fixed-size widgets
- Card height should fit content: `height: self.minimum_height` or fixed dp
